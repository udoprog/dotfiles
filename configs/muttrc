set folder = ~/Mail

folder-hook '+{{PRIMARY_MAILBOX}}/*' source ~/.mutt/accounts/{{PRIMARY_MAIL}}
folder-hook '+{{SECONDARY_MAILBOX}}/*' source ~/.mutt/accounts/{{SECONDARY_MAIL}}

source ~/.mutt/accounts/{{PRIMARY_MAIL}}

macro index <f2> '<change-folder>={{PRIMARY_MAILBOX}}/inbox<enter>'
macro index <f3> '<change-folder>={{SECONDARY_MAILBOX}}/inbox<enter>'

source ~/.mutt/mailboxes

set spoolfile = +p/inbox

set move = no
set copy = no

set realname = '{{PROFILE_NAME}}'
set use_from = yes
set envelope_from = yes

set sort = threads
set sort_browser = date

#======================================================#
# Order of headers and what to show
hdr_order Date: From: User-Agent: X-Mailer \
          To: Cc: Reply-To: Subject:
ignore *
unignore Date: From: User-Agent: X-Mailer  \
         To: Cc: Reply-To: Subject:

#======================================================#
# which editor do you want to use?
# vim of course!
set editor="vim -c 'set tw=70 et'"
set edit_headers          # See the headers when editing

set signature = ~/.mutt/signature

#======================================================#
# Aliases

set sort_alias=alias     # sort aliases in alpha order by alias name

alternative_order text/plain text/enriched text/html text
auto_view text/html

#======================================================#
# Odds and ends
set markers          # mark wrapped lines of text in the pager with a +
set smart_wrap       # Don't wrap mid-word
set pager_context=5  # Retain 5 lines of previous page when scrolling.
set status_on_top    # Status bar on top.
push <show-version>  # Shows mutt version at startup

set header_cache = ~/.mutt/cache/headers
set message_cachedir = ~/.mutt/cache/bodies
set certificate_file = ~/.mutt/certificates

bind index J next-unread
bind index K previous-unread
bind index gg first-entry
bind index G last-entry
bind index o display-message

bind pager j next-line
bind pager k previous-line
bind pager J next-undeleted
bind pager K previous-undeleted
bind pager gg top
bind pager G bottom

bind index,pager \Cj sidebar-next
bind index,pager \Ck sidebar-prev
bind index,pager \Co sidebar-open

bind index,pager gr group-reply
bind index,pager \Cu half-up
bind index,pager \Cd half-down

macro index,pager \CL '<pipe-message> cd ~/repo/linux && git am -<enter>'

macro index A \
    "<tag-pattern>~N<enter><tag-prefix><clear-flag>N<untag-pattern>.<enter>" \
    "mark all new as read"<Paste>

set mail_check_stats=yes
set sidebar_format="%B%?F? [%F]?%* %?N?%N/?%S"
set sidebar_width=60
set sidebar_visible=yes
set sidebar_delim_chars='|'
set sidebar_sort_method=alpha

# gpg

source ~/.mutt/gpg

set pgp_use_gpg_agent = yes
set pgp_sign_as = {{GPG_KEY}}
set pgp_timeout = 3600
set crypt_autosign = yes
set crypt_replyencrypt = yes

# colors

color sidebar_new yellow default

color normal      white          black
color hdrdefault  green          default
color quoted      green          default
color quoted1     yellow         default
color quoted2     red            default
color signature   cyan           default
color indicator   brightyellow   red
color error       brightred      default
color status      brightwhite    blue
color tree        brightmagenta  black
color tilde       blue           default
color attachment  brightyellow   default
color markers     brightred      default
color message     white          black
color search      brightwhite    magenta
color bold        brightyellow   default
